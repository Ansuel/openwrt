From 5e170fcf8018fbc649c75b2423fa2f03daa01207 Mon Sep 17 00:00:00 2001
From: YaleiZang <yalei.zang@airoha.com>
Date: Tue, 2 Dec 2025 19:30:41 +0800
Subject: [PATCH] airoha: add gpt support config

---
 configs/an7581_evb_defconfig |  8 ++++++++
 configs/an7583_evb_defconfig | 10 +++++++++-
 2 files changed, 17 insertions(+), 1 deletion(-)

diff --git a/configs/an7581_evb_defconfig b/configs/an7581_evb_defconfig
index 66a493a0..bff435b8 100644
--- a/configs/an7581_evb_defconfig
+++ b/configs/an7581_evb_defconfig
@@ -10,6 +10,8 @@ CONFIG_DEFAULT_DEVICE_TREE="airoha/en7581-evb"
 CONFIG_SYS_LOAD_ADDR=0x81800000
 CONFIG_BUILD_TARGET="u-boot.bin"
 # CONFIG_EFI_LOADER is not set
+CONFIG_EFI_PARTITION=y
+CONFIG_EFI_PARTITION_ENTRIES_OFF=131072
 CONFIG_FIT=y
 CONFIG_FIT_VERBOSE=y
 CONFIG_BOOTDELAY=3
@@ -26,10 +28,13 @@ CONFIG_CMD_BOOTMENU=y
 # CONFIG_CMD_XIMG is not set
 CONFIG_CMD_BIND=y
 CONFIG_CMD_GPIO=y
+CONFIG_CMD_GPT=y
+CONFIG_CMD_GPT_RENAME=y
 CONFIG_CMD_MMC=y
 CONFIG_CMD_MTD=y
 CONFIG_CMD_SF_TEST=y
 CONFIG_CMD_SPI=y
+CONFIG_CMD_SETEXPR=y
 # CONFIG_CMD_SETEXPR is not set
 CONFIG_CMD_PING=y
 CONFIG_CMD_EXT4=y
@@ -37,6 +42,7 @@ CONFIG_CMD_FAT=y
 CONFIG_CMD_FS_GENERIC=y
 CONFIG_CMD_MTDPARTS=y
 CONFIG_CMD_LOG=y
+CONFIG_OF_LIBFDT=y
 CONFIG_OF_UPSTREAM=y
 CONFIG_ENV_OVERWRITE=y
 CONFIG_ENV_IS_IN_MMC=y
@@ -64,6 +70,8 @@ CONFIG_SPI_FLASH_SPANSION=y
 CONFIG_SPI_FLASH_STMICRO=y
 CONFIG_SPI_FLASH_WINBOND=y
 CONFIG_SPI_FLASH_MTD=y
+CONFIG_PARTITION_TYPE_GUID=y
+CONFIG_PARTITIONS=y
 CONFIG_AIROHA_ETH=y
 CONFIG_PHY=y
 CONFIG_PINCTRL=y
diff --git a/configs/an7583_evb_defconfig b/configs/an7583_evb_defconfig
index 84f1035c..19927dd6 100644
--- a/configs/an7583_evb_defconfig
+++ b/configs/an7583_evb_defconfig
@@ -12,6 +12,8 @@ CONFIG_DM_RESET=y
 CONFIG_SYS_LOAD_ADDR=0x81800000
 CONFIG_BUILD_TARGET="u-boot.bin"
 # CONFIG_EFI_LOADER is not set
+CONFIG_EFI_PARTITION=y
+CONFIG_EFI_PARTITION_ENTRIES_OFF=131072
 CONFIG_FIT=y
 CONFIG_FIT_VERBOSE=y
 CONFIG_BOOTDELAY=3
@@ -28,17 +30,21 @@ CONFIG_CMD_BOOTMENU=y
 # CONFIG_CMD_XIMG is not set
 CONFIG_CMD_BIND=y
 CONFIG_CMD_GPIO=y
+CONFIG_CMD_GPT=y
+CONFIG_CMD_GPT_RENAME=y
 CONFIG_CMD_MMC=y
 CONFIG_CMD_MTD=y
 CONFIG_CMD_SF_TEST=y
 CONFIG_CMD_SPI=y
-# CONFIG_CMD_SETEXPR is not set
+CONFIG_CMD_SETEXPR=y
+# CONFIG_CMD_SETEXPR_FMT is not set
 CONFIG_CMD_PING=y
 CONFIG_CMD_EXT4=y
 CONFIG_CMD_FAT=y
 CONFIG_CMD_FS_GENERIC=y
 CONFIG_CMD_MTDPARTS=y
 CONFIG_CMD_LOG=y
+CONFIG_OF_LIBFDT=y
 CONFIG_ENV_OVERWRITE=y
 CONFIG_ENV_IS_IN_MMC=y
 CONFIG_SYS_RELOC_GD_ENV_ADDR=y
@@ -64,6 +70,8 @@ CONFIG_SPI_FLASH_SPANSION=y
 CONFIG_SPI_FLASH_STMICRO=y
 CONFIG_SPI_FLASH_WINBOND=y
 CONFIG_SPI_FLASH_MTD=y
+CONFIG_PARTITION_TYPE_GUID=y
+CONFIG_PARTITIONS=y
 CONFIG_PHYLIB=y
 CONFIG_PHY=y
 CONFIG_PINCTRL=y
-- 
2.17.1

